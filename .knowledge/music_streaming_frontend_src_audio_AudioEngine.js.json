{"is_source_file": true, "format": "JavaScript", "description": "This file defines the AudioEngine class, a Web Audio API wrapper for managing audio playback, volume control, analysis, and time updates in a React application. It provides methods for initializing audio context, loading audio sources, controlling playback, subscribing to time and analyser data, and cleaning up resources.", "external_files": [], "external_methods": [], "published": ["AudioEngine"], "classes": [{"name": "AudioEngine", "description": "A lightweight wrapper around the Web Audio API for controlling audio playback, analysis, and time updates."}], "methods": [{"name": "constructor({ fadeMs = 200, fftSize = 1024 } = {})", "description": "Initializes the AudioEngine with optional fade and FFT size parameters, and sets up internal state.", "scope": "AudioEngine", "scopeKind": "class"}, {"name": "init()", "description": "Initializes the AudioContext and audio graph nodes if not already created.", "scope": "AudioEngine", "scopeKind": "class"}, {"name": "resume()", "description": "Resumes the AudioContext to satisfy autoplay policies, should be called on user gesture.", "scope": "AudioEngine", "scopeKind": "class"}, {"name": "load(url, metadata = {})", "description": "Loads a new audio source URL, resets playback state, and prepares the audio element.", "scope": "AudioEngine", "scopeKind": "class"}, {"name": "play()", "description": "Starts playback with a fade-in effect, resuming AudioContext if necessary.", "scope": "AudioEngine", "scopeKind": "class"}, {"name": "pause()", "description": "Pauses playback with a fade-out effect.", "scope": "AudioEngine", "scopeKind": "class"}, {"name": "seek(seconds)", "description": "Seeks the playback position to a specified time in seconds.", "scope": "AudioEngine", "scopeKind": "class"}, {"name": "setVolume(v)", "description": "Sets the playback volume (linear gain 0..1) with smooth ramping.", "scope": "AudioEngine", "scopeKind": "class"}, {"name": "getCurrentTime()", "description": "Returns the current playback position in seconds.", "scope": "AudioEngine", "scopeKind": "class"}, {"name": "getDuration()", "description": "Returns the duration of the loaded audio in seconds, or NaN if unknown.", "scope": "AudioEngine", "scopeKind": "class"}, {"name": "onTimeUpdate(cb)", "description": "Subscribes to time and buffered update events; returns an unsubscribe function.", "scope": "AudioEngine", "scopeKind": "class"}, {"name": "onAnalyzerData(cb)", "description": "Subscribes to real-time analyser data updates; returns an unsubscribe function.", "scope": "AudioEngine", "scopeKind": "class"}, {"name": "_emitTimeUpdate()", "description": "Internal method to emit current time, duration, and buffer info to subscribers.", "scope": "AudioEngine", "scopeKind": "class"}, {"name": "_onTimeTick()", "description": "Internal method called on each animation frame to update time info.", "scope": "AudioEngine", "scopeKind": "class"}, {"name": "_onAnalyserTick()", "description": "Internal method to fetch frequency data and notify subscribers.", "scope": "AudioEngine", "scopeKind": "class"}, {"name": "_beginLoops()", "description": "Starts animation frame loops for time and analyser updates.", "scope": "AudioEngine", "scopeKind": "class"}, {"name": "_endLoops()", "description": "Stops the animation frame update loops.", "scope": "AudioEngine", "scopeKind": "class"}, {"name": "_onAudioEnded()", "description": "Handles the end of audio playback, stopping loops and updating time info.", "scope": "AudioEngine", "scopeKind": "class"}, {"name": "_onAudioProgress()", "description": "Updates buffered info when progress events occur.", "scope": "AudioEngine", "scopeKind": "class"}, {"name": "dispose()", "description": "Cleans up audio nodes, event listeners, and context resources.", "scope": "AudioEngine", "scopeKind": "class"}, {"name": "_fadeTo(targetGain, durationMs)", "scope": "AudioEngine", "scopeKind": "class", "description": "unavailable"}], "calls": ["this._onTimeTick", "this._onAnalyserTick", "this._emitTimeUpdate", "this._fadeTo", "this.audio.play", "this.audio.pause", "this.ctx.createGain", "this.ctx.createAnalyser", "this.ctx.createMediaElementSource", "this.ctx.resume", "window.requestAnimationFrame", "window.cancelAnimationFrame"], "search-terms": ["Web Audio API", "AudioEngine", "React audio wrapper", "volume control", "audio analysis", "time updates", "playback control", "audio context"], "state": 2, "file_id": 27, "knowledge_revision": 64, "git_revision": "", "ctags": [{"_type": "tag", "name": "AudioEngine", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^export default class AudioEngine {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "_beginLoops", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^  _beginLoops() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "AudioEngine", "scopeKind": "class"}, {"_type": "tag", "name": "_emitTimeUpdate", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^  _emitTimeUpdate() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "AudioEngine", "scopeKind": "class"}, {"_type": "tag", "name": "_endLoops", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^  _endLoops() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "AudioEngine", "scopeKind": "class"}, {"_type": "tag", "name": "_fadeTo", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^  _fadeTo(targetGain, durationMs) {$/", "language": "JavaScript", "kind": "method", "signature": "(targetGain, durationMs)", "scope": "AudioEngine", "scopeKind": "class"}, {"_type": "tag", "name": "_onAnalyserTick", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^  _onAnalyserTick() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "AudioEngine", "scopeKind": "class"}, {"_type": "tag", "name": "_onAudioEnded", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^  _onAudioEnded() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "AudioEngine", "scopeKind": "class"}, {"_type": "tag", "name": "_onAudioProgress", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^  _onAudioProgress() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "AudioEngine", "scopeKind": "class"}, {"_type": "tag", "name": "_onTimeTick", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^  _onTimeTick() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "AudioEngine", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^  constructor({ fadeMs = 200, fftSize = 1024 } = {}) {$/", "language": "JavaScript", "kind": "method", "signature": "({ fadeMs = 200, fftSize = 1024 } = {})", "scope": "AudioEngine", "scopeKind": "class"}, {"_type": "tag", "name": "dispose", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^  dispose() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "AudioEngine", "scopeKind": "class"}, {"_type": "tag", "name": "getCurrentTime", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^  getCurrentTime() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "AudioEngine", "scopeKind": "class"}, {"_type": "tag", "name": "getDuration", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^  getDuration() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "AudioEngine", "scopeKind": "class"}, {"_type": "tag", "name": "init", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^  async init() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "AudioEngine", "scopeKind": "class"}, {"_type": "tag", "name": "load", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^  async load(url, metadata = {}) {$/", "language": "JavaScript", "kind": "method", "signature": "(url, metadata = {})", "scope": "AudioEngine", "scopeKind": "class"}, {"_type": "tag", "name": "onAnalyzerData", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^  onAnalyzerData(cb) {$/", "language": "JavaScript", "kind": "method", "signature": "(cb)", "scope": "AudioEngine", "scopeKind": "class"}, {"_type": "tag", "name": "onTimeUpdate", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^  onTimeUpdate(cb) {$/", "language": "JavaScript", "kind": "method", "signature": "(cb)", "scope": "AudioEngine", "scopeKind": "class"}, {"_type": "tag", "name": "pause", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^  async pause() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "AudioEngine", "scopeKind": "class"}, {"_type": "tag", "name": "play", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^  async play() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "AudioEngine", "scopeKind": "class"}, {"_type": "tag", "name": "resume", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^  async resume() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "AudioEngine", "scopeKind": "class"}, {"_type": "tag", "name": "seek", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^  seek(seconds) {$/", "language": "JavaScript", "kind": "method", "signature": "(seconds)", "scope": "AudioEngine", "scopeKind": "class"}, {"_type": "tag", "name": "setVolume", "path": "/home/kavia/workspace/code-generation/music-stream-and-discover-31085-31094/music_streaming_frontend/src/audio/AudioEngine.js", "pattern": "/^  setVolume(v) {$/", "language": "JavaScript", "kind": "method", "signature": "(v)", "scope": "AudioEngine", "scopeKind": "class"}], "hash": "31eef19f3ad66bcd1300a190c14dff59", "format-version": 4, "code-base-name": "music_streaming_frontend", "filename": "music_streaming_frontend/src/audio/AudioEngine.js", "revision_history": [{"64": ""}]}